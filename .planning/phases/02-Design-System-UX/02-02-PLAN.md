---
phase: 02-Design-System-UX
plan: 02
type: execute
wave: 2
depends_on: [02-01]
files_modified:
  - src/components/ui/dialog.tsx
  - src/components/ui/select.tsx
  - src/components/ui/skeleton.tsx
  - src/components/ui/form.tsx
  - src/app/(main)/vendors/register/page.tsx
  - src/components/vendors/VendorCard.tsx
  - src/components/jobs/JobCard.tsx
  - src/components/experiences/HorizontalExperiences.tsx
  - e2e/component-migration.spec.ts
autonomous: true
requirements: []

must_haves:
  truths:
    - "All base UI components (Button, Input, Card, Badge, Dialog, Select, Skeleton) use shadcn/ui"
    - "Vendor registration page uses shadcn/ui components and no inline styles"
    - "VendorCard and JobCard components use shadcn/ui Card component"
    - "Mobile tests pass for all migrated components at 375px viewport"
  artifacts:
    - path: "src/components/ui/dialog.tsx"
      provides: "shadcn/ui Dialog component for modals"
      exports: ["Dialog", "DialogContent", "DialogDescription", "DialogHeader", "DialogTitle", "DialogTrigger"]
    - path: "src/components/ui/select.tsx"
      provides: "shadcn/ui Select component for dropdowns"
      exports: ["Select", "SelectContent", "SelectItem", "SelectTrigger", "SelectValue"]
    - path: "src/components/ui/skeleton.tsx"
      provides: "shadcn/ui Skeleton component for loading states"
      exports: ["Skeleton"]
    - path: "src/components/ui/form.tsx"
      provides: "shadcn/ui Form components for accessible forms"
      exports: ["Form", "FormControl", "FormDescription", "FormField", "FormItem", "FormLabel", "FormMessage"]
    - path: "e2e/component-migration.spec.ts"
      provides: "Mobile tests for migrated components"
      min_lines: 50
  key_links:
    - from: "src/app/(main)/vendors/register/page.tsx"
      to: "src/components/ui/button.tsx"
      via: "Button component import and usage"
      pattern: "import.*Button.*from.*@/components/ui/button"
    - from: "src/components/vendors/VendorCard.tsx"
      to: "src/components/ui/card.tsx"
      via: "Card component import and usage"
      pattern: "import.*Card.*from.*@/components/ui/card"
    - from: "e2e/component-migration.spec.ts"
      to: "src/app/(main)/vendors/register/page.tsx"
      via: "Playwright test navigates to vendor registration"
      pattern: "page\\.goto.*vendors/register"
---

<objective>
Migrate all custom UI components to shadcn/ui and update consuming components with mobile testing validation.

Purpose: Replace all remaining custom UI components (Dialog, Select, Skeleton, Form) with shadcn/ui equivalents, update vendor registration page and feature components (VendorCard, JobCard) to use new components, remove all inline styles that block theming, and validate mobile responsiveness at 375px viewport using Playwright tests.

Output: Complete shadcn/ui component library + migrated feature components + mobile E2E tests passing
</objective>

<execution_context>
@/Users/toshioj/.claude/get-shit-done/workflows/execute-plan.md
@/Users/toshioj/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/02-Design-System-UX/02-CONTEXT.md
@.planning/phases/02-Design-System-UX/02-RESEARCH.md
@.planning/phases/02-Design-System-UX/02-01-SUMMARY.md
@src/components/ui/Button.tsx
@src/components/ui/Input.tsx
@src/components/ui/Card.tsx
@src/components/ui/Badge.tsx
@src/app/(main)/vendors/register/page.tsx
@src/components/vendors/VendorCard.tsx
@src/components/jobs/JobCard.tsx
@playwright.config.ts
</context>

<tasks>

<task type="auto">
  <name>Add remaining shadcn/ui components (Dialog, Select, Skeleton, Form)</name>
  <files>
    src/components/ui/dialog.tsx
    src/components/ui/select.tsx
    src/components/ui/skeleton.tsx
    src/components/ui/form.tsx
  </files>
  <action>
    Add remaining shadcn/ui components using CLI:

    ```bash
    npx shadcn-ui@latest add dialog
    npx shadcn-ui@latest add select
    npx shadcn-ui@latest add skeleton
    npx shadcn-ui@latest add form
    ```

    **Customize Dialog component for mobile:**
    - Edit `src/components/ui/dialog.tsx` after installation
    - Ensure DialogContent has mobile-friendly sizing:
      - Default max-width: `max-w-md` (448px) on mobile
      - Add responsive classes: `w-[calc(100%-2rem)]` (viewport - padding)
      - Add `sm:max-w-lg` for tablet+ viewports
    - Verify DialogContent has scrollable content area:
      - Add `max-h-[60vh] overflow-y-auto` to content wrapper
    - Ensure close button (X) has 48px touch target

    **Customize Select component for mobile:**
    - Edit `src/components/ui/select.tsx`
    - Verify SelectTrigger has min-height 48px (h-12)
    - Ensure SelectContent positions correctly on mobile (below trigger, not overlapping viewport edges)

    **Verify Skeleton component:**
    - No customization needed; shadcn default is mobile-friendly

    **Verify Form components:**
    - Form, FormField, FormLabel, FormControl, FormMessage should use proper ARIA attributes
    - FormMessage (error text) should be text-sm and text-red-600 for visibility
    - FormLabel should be associated with input via htmlFor
  </action>
  <verify>
    ```bash
    # Verify components installed
    ls -la src/components/ui/dialog.tsx src/components/ui/select.tsx src/components/ui/skeleton.tsx src/components/ui/form.tsx

    # Check Dialog has mobile-friendly sizing
    grep -E "max-w-md|w-\[calc\(100%-2rem\)\]|max-h-\[60vh\]" src/components/ui/dialog.tsx

    # Check Select has 48px height
    grep "h-12\|min-h-\[48px\]" src/components/ui/select.tsx

    # Verify Form components export correctly
    grep -E "export.*Form|FormField|FormLabel|FormControl|FormMessage" src/components/ui/form.tsx
    ```
  </verify>
  <done>
    - Dialog, Select, Skeleton, Form components added via shadcn CLI
    - DialogContent has mobile sizing: max-w-md, w-[calc(100%-2rem)], max-h-[60vh] overflow-y-auto
    - SelectTrigger has h-12 (48px) for mobile touch targets
    - Form components have proper ARIA attributes and error styling
  </done>
</task>

<task type="auto">
  <name>Migrate vendor registration page and feature components to shadcn/ui</name>
  <files>
    src/app/(main)/vendors/register/page.tsx
    src/components/vendors/VendorCard.tsx
    src/components/jobs/JobCard.tsx
    src/components/experiences/HorizontalExperiences.tsx
  </files>
  <action>
    **Part 1: Update vendor registration page**

    Read `src/app/(main)/vendors/register/page.tsx` and perform component migration:

    1. **Replace Button imports and usage:**
       - Change: `import { Button } from '@/components/ui/Button'`
       - To: `import { Button } from '@/components/ui/button'`
       - Update all `<Button>` usages to use variant="primary" for submit buttons
       - Change variant="outline" for secondary actions (e.g., "Cancel")

    2. **Replace Input imports and usage:**
       - Change: `import { Input } from '@/components/ui/Input'`
       - To: `import { Input } from '@/components/ui/input'`
       - Remove any inline `style={}` attributes on Input components
       - Add `className="w-full"` for mobile full-width inputs

    3. **Replace Select/dropdown imports:**
       - If using custom select, replace with: `import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select'`
       - Update all dropdown usages to use shadcn Select component

    4. **Add Form components for accessibility:**
       - Import: `import { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from '@/components/ui/form'`
       - Wrap form fields in FormField pattern:
         ```tsx
         <FormItem>
           <FormLabel htmlFor="business-name">Business Name *</FormLabel>
           <FormControl>
             <Input id="business-name" placeholder="Your business name" />
           </FormControl>
           <FormMessage>{errors.businessName}</FormMessage>
         </FormItem>
         ```

    5. **Remove inline styles that block theming:**
       - Audit page for `style={{}}` attributes
       - Replace with Tailwind classes or remove if unnecessary
       - Common replacements:
         - `style={{ backgroundColor: '#F5C842' }}` → `className="bg-primary-400"`
         - `style={{ color: '#1A1A1A' }}` → `className="text-neutral-800"`

    6. **Mobile-first layout:**
       - Form fields: Use `<div className="grid grid-cols-1 sm:grid-cols-2 gap-4">` for responsive 2-column layout
       - Submit button: `<Button className="w-full sm:w-auto" variant="primary">Register</Button>`
       - Ensure 16px spacing between form sections (space-y-4)

    **Part 2: Update VendorCard component**

    Read `src/components/vendors/VendorCard.tsx` and migrate:

    1. Replace Card imports:
       - Change: `import { Card } from '@/components/ui/Card'`
       - To: `import { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card'`

    2. Replace Badge imports:
       - Change: `import { Badge } from '@/components/ui/Badge'`
       - To: `import { Badge } from '@/components/ui/badge'`

    3. Update Card structure to use shadcn subcomponents:
       ```tsx
       <Card className="flex flex-col h-full">
         <CardHeader>
           <CardTitle className="text-lg">{vendor.business_name}</CardTitle>
           <CardDescription>{vendor.specialty}</CardDescription>
         </CardHeader>
         <CardContent className="flex-1">
           {/* Card content here */}
         </CardContent>
       </Card>
       ```

    4. Remove inline styles; use Tailwind classes

    **Part 3: Update JobCard component**

    Read `src/components/jobs/JobCard.tsx` and migrate:

    1. Replace Card imports (same as VendorCard)
    2. Replace Badge imports for status badges (open, closed)
    3. Update Button imports for "View Details" CTA
    4. Remove inline styles

    **Part 4: Update HorizontalExperiences (vendor carousel)**

    Read `src/components/experiences/HorizontalExperiences.tsx` and migrate:

    1. Replace Card imports
    2. Ensure carousel scrolls horizontally on mobile (overflow-x-auto, snap-x)
    3. Verify touch targets for carousel navigation buttons ≥48px

    Note: Per research recommendation, audit all components for inline `style={}` attributes using grep before editing:
    ```bash
    grep -r "style={{" src/app/(main)/vendors/register/page.tsx src/components/vendors/VendorCard.tsx src/components/jobs/JobCard.tsx src/components/experiences/HorizontalExperiences.tsx
    ```
  </action>
  <verify>
    ```bash
    # Verify vendor registration page imports shadcn components
    grep -E "import.*from.*@/components/ui/(button|input|select|form)" src/app/(main)/vendors/register/page.tsx

    # Verify VendorCard uses shadcn Card
    grep -E "import.*Card.*from.*@/components/ui/card" src/components/vendors/VendorCard.tsx

    # Verify JobCard uses shadcn Card
    grep -E "import.*Card.*from.*@/components/ui/card" src/components/jobs/JobCard.tsx

    # Check for inline styles (should return no results after migration)
    grep "style={{" src/app/(main)/vendors/register/page.tsx src/components/vendors/VendorCard.tsx src/components/jobs/JobCard.tsx src/components/experiences/HorizontalExperiences.tsx || echo "No inline styles found (good)"

    # Verify Button uses variant prop
    grep "variant=\"primary\|outline\|secondary\"" src/app/(main)/vendors/register/page.tsx
    ```
  </verify>
  <done>
    - Vendor registration page imports and uses shadcn/ui components (Button, Input, Select, Form)
    - All form fields wrapped in FormField pattern with FormLabel, FormControl, FormMessage
    - VendorCard uses shadcn Card with CardHeader, CardTitle, CardDescription, CardContent
    - JobCard uses shadcn Card and Badge components
    - HorizontalExperiences uses shadcn Card for vendor carousel items
    - All inline styles removed; replaced with Tailwind classes
    - Mobile-first layout: grid grid-cols-1 sm:grid-cols-2 for form fields
    - Submit button full-width on mobile (w-full sm:w-auto)
  </done>
</task>

<task type="auto">
  <name>Create mobile E2E tests for migrated components</name>
  <files>
    e2e/component-migration.spec.ts
  </files>
  <action>
    Create `e2e/component-migration.spec.ts` with Playwright tests for migrated components at mobile viewport (375px - iPhone SE):

    ```typescript
    import { test, expect, devices } from '@playwright/test'

    // Use mobile viewport for all tests
    test.use({
      ...devices['iPhone SE'],  // 375x667px
    })

    test.describe('Component Migration - Mobile Tests', () => {
      test('Vendor registration page - mobile layout and touch targets', async ({ page }) => {
        await page.goto('/vendors/register')

        // Verify page loads
        await expect(page.getByRole('heading', { name: /register/i })).toBeVisible()

        // Check input fields have 48px+ height (touch targets)
        const businessNameInput = page.getByLabel(/business name/i)
        await expect(businessNameInput).toBeVisible()
        const inputHeight = await businessNameInput.evaluate((el) => el.getBoundingClientRect().height)
        expect(inputHeight).toBeGreaterThanOrEqual(48)

        // Verify no horizontal scroll
        const bodyWidth = await page.evaluate(() => document.body.scrollWidth)
        const viewportWidth = await page.evaluate(() => window.innerWidth)
        expect(bodyWidth).toBeLessThanOrEqual(viewportWidth)

        // Check submit button is full-width on mobile
        const submitButton = page.getByRole('button', { name: /register|submit/i })
        const buttonWidth = await submitButton.evaluate((el) => el.getBoundingClientRect().width)
        const containerWidth = await page.evaluate(() => document.querySelector('form')?.getBoundingClientRect().width || 0)
        expect(buttonWidth).toBeGreaterThan(containerWidth * 0.9)  // At least 90% of container width
      })

      test('VendorCard - mobile rendering', async ({ page }) => {
        await page.goto('/')

        // Find first vendor card
        const vendorCard = page.locator('[data-testid="vendor-card"]').first()
        await expect(vendorCard).toBeVisible()

        // Verify card title visible
        await expect(vendorCard.getByRole('heading')).toBeVisible()

        // Verify card doesn't overflow viewport
        const cardWidth = await vendorCard.evaluate((el) => el.getBoundingClientRect().width)
        const viewportWidth = await page.evaluate(() => window.innerWidth)
        expect(cardWidth).toBeLessThan(viewportWidth)
      })

      test('Form validation errors visible on mobile', async ({ page }) => {
        await page.goto('/vendors/register')

        // Try to submit empty form
        const submitButton = page.getByRole('button', { name: /register|submit/i })
        await submitButton.click()

        // Check error message appears and is visible
        const errorMessage = page.getByText(/required|invalid/i).first()
        await expect(errorMessage).toBeVisible()

        // Verify error message is in viewport (not hidden by keyboard)
        const errorBox = await errorMessage.boundingBox()
        expect(errorBox).toBeTruthy()
        if (errorBox) {
          expect(errorBox.y).toBeLessThan(667)  // iPhone SE viewport height
        }
      })

      test('Dialog modal fits mobile viewport', async ({ page }) => {
        // Navigate to page with dialog (e.g., vendor detail page with inquiry modal)
        await page.goto('/vendors/mobile-cart-specialist')

        // Open dialog
        const requestQuoteButton = page.getByRole('button', { name: /request quote|get quote/i })
        if (await requestQuoteButton.isVisible()) {
          await requestQuoteButton.click()

          // Wait for dialog to open
          const dialog = page.getByRole('dialog')
          await expect(dialog).toBeVisible()

          // Verify dialog doesn't exceed viewport width
          const dialogWidth = await dialog.evaluate((el) => el.getBoundingClientRect().width)
          const viewportWidth = await page.evaluate(() => window.innerWidth)
          expect(dialogWidth).toBeLessThanOrEqual(viewportWidth - 32)  // Account for 2rem padding

          // Verify dialog content is scrollable if needed
          const dialogContent = dialog.locator('[role="document"]')
          await expect(dialogContent).toBeVisible()
        }
      })
    })
    ```

    Add data-testid attributes to components if needed for reliable selectors:
    - VendorCard: Add `data-testid="vendor-card"` to Card component
    - Other components: Use semantic ARIA roles where possible (avoid brittle CSS selectors)

    Run tests to verify they pass:
    ```bash
    npx playwright test e2e/component-migration.spec.ts
    ```

    If tests fail, note failures in SUMMARY and create follow-up tasks in next plan.
  </action>
  <verify>
    ```bash
    # Verify test file created
    ls -la e2e/component-migration.spec.ts

    # Run mobile tests
    npx playwright test e2e/component-migration.spec.ts --project="Mobile Chrome"

    # Check test results (should show passing tests)
    echo "Test run complete. Review output above for pass/fail status."
    ```
  </verify>
  <done>
    - e2e/component-migration.spec.ts created with 4 mobile tests
    - Tests verify: input touch targets ≥48px, no horizontal scroll, form validation visible, dialog fits viewport
    - Tests use iPhone SE device profile (375px viewport)
    - Playwright tests pass (or failures documented in SUMMARY for follow-up)
  </done>
</task>

</tasks>

<verification>
- Dialog, Select, Skeleton, Form components added via shadcn CLI
- Vendor registration page imports shadcn components (Button, Input, Select, Form)
- VendorCard, JobCard, HorizontalExperiences use shadcn Card component
- All inline styles removed from migrated components
- Mobile E2E tests created and run at 375px viewport
- Tests verify touch targets, viewport overflow, validation visibility, dialog sizing
</verification>

<success_criteria>
1. All shadcn/ui components installed: `ls src/components/ui/{button,input,label,card,badge,dialog,select,skeleton,form}.tsx` returns 9 files
2. Vendor registration page has no inline styles: `grep "style={{" src/app/(main)/vendors/register/page.tsx` returns no results
3. VendorCard uses shadcn Card: `grep "from '@/components/ui/card'" src/components/vendors/VendorCard.tsx` succeeds
4. Mobile E2E tests pass: `npx playwright test e2e/component-migration.spec.ts --project="Mobile Chrome"` shows 4/4 passing
5. No horizontal scroll on mobile: Tests verify bodyWidth <= viewportWidth at 375px
</success_criteria>

<output>
After completion, create `.planning/phases/02-Design-System-UX/02-02-SUMMARY.md`
</output>
